# 日志优化说明

本文档说明了对系统日志进行的优化调整，以减少冗长的日志内容，提高日志的可读性和实用性。

## 主要优化策略

1. **添加前缀标识**：为每个模块的日志添加简短前缀，如"WS:", "NM:", "DC:"等，便于快速识别日志来源
2. **精简日志内容**：移除过于详细的命令输出和重复信息
3. **合并状态日志**：将多条状态更新合并为单条摘要信息
4. **限制错误日志长度**：对长错误信息进行截断，仅保留有用部分
5. **移除冗余调试信息**：移除开发阶段的详细调试信息

## 各模块日志前缀

* `WS:` - WebSocket服务器相关日志
* `WS-Handler:` - WebSocket处理程序相关日志
* `NM:` - 网络监控模块相关日志
* `DM:` - 设备监控器相关日志
* `DC:` - 数据收集相关日志

## 日志最佳实践

1. **简明扼要**：日志应简洁清晰，包含关键信息但不冗长
2. **统一格式**：使用一致的日志格式，便于筛选和分析
3. **分级记录**：区分错误、警告、信息等不同级别的日志
4. **关注异常**：确保记录所有异常情况，但不需要完整堆栈跟踪
5. **保护隐私**：避免在日志中包含敏感信息（密码、凭证等）

## 优化前后对比

### 优化前示例：
```
尝试使用Telnet连接到设备 192.168.1.1... (尝试 1/3)
Telnet连接失败: socket timeout，尝试SSH连接...
尝试使用SSH连接到设备 192.168.1.1...
SSH连接失败: Authentication failed.
使用缓存的状态数据 (缓存时间: 120.5秒)
```

### 优化后示例：
```
NM: 尝试连接 192.168.1.1 (1/3)
NM: Telnet连接失败，尝试SSH
NM: SSH连接失败
NM: 使用缓存数据 (120秒)
```

## 注意事项

1. 如遇到需要详细日志调试问题，可临时增加更详细的日志输出
2. 确保日志文件定期轮换，防止占用过多磁盘空间
3. 考虑在生产环境中使用专业日志系统，如ELK或Graylog 